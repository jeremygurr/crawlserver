dropping 2 of the same wands don't stack the charges, then picking them up loses some
picking up 2 of the same wands stores 2 of them in the inv
orb run: 2 stairs normal, 1 stairs hard

hell effect on wand draining
longer messages
no chop or eat
fix initial autopickup
you kill the death yak! (doesn't show damage)
numbers everywhere option (put in wizard mode numbers)

game breaking changes:
  lesser / greater curses (curse power level, identification difficulty level?)
    equipped items lose their curse over time, according to piety level
      needs to be bound to experience
        figure out how drain does it
    remove curse scroll lowers curse level of all carried items according to invocations level
    mummies curse slots
      weaker mummy
        curse_an_item
          item_is_cursable
          do_curse_item
        curse_a_slot
      greater mummy
    show cursed slot when empty
    item description should display curse weight
    item spawning with curses
    curse level > 1000 disables bonuses
      attack bonuses
      defense bonsuses
      resistance bonsuses
      super curse in description
      super curse don't show attributes
  polish curses
  test movement
  equipping item into cursed slot
  display known objects not working
  test new heal wands
  test sludge elf
  add stubs for remaining changes
    tags:
      sp
      sp_max
      target_hunger_state
      motion
    player.cc
      sp
      sp_max
      target_hunger_state
      motion

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    potion / scroll types
    stamina
    wand auto_charging
    immolation power level?
    wand paralysis
  setup multi track deployment
    split out rcs
  deploy

  identification
    items have ignorance level
    if ignorance level > 100, can't use / equip
    id scroll reduces ignorance by 2^(intelligence / 5) * 50
    items spawn with various levels of ignorance
  add missing scrolls and potions recently added
    stamina. infinity -> permanence
  add stamina
    to player
    to display
    run speeds
      current speed part of player
      key
      movement change
    exhaust -> stamina

  wand auto-charging
  immolation monster status support amped version

finish stub support for new potions and scrolls:
  amplification
  briars
  inversion
  replication
  returning
  displacement
  karma
  infinity

  stamina
  patience
  darkness
  burning
    consumes remaining mana, causes 2x damage to health down to 1
    cuts dj health to 1
  poison

amp stuff
  show amp + inv status
  remove question from bene mut
    only remove good
  doc
  immolation:
  - turns off imm
  + causes small to explode like medium, medium like big
  amp blink -> controlled blink -> extended blink to anywhere in level
  amp teleport -> semi controlled teleport -> go to any branch
  jumpback scroll (save where you're at into an ability that will teleport you back there)

when equipping an item to a cursed slot, curse passes to the item, slot uncursed
  display cursed slots somewhere
 
range of summon lightning spire?
show easy mode in % menu
tengu pickup rings?

new monsters: 
  witch : curses player
  
new species:
  nightstalker
  fairy

--------------------------------------------------
website stats for game list
--------------------------------------------------
client.js


--------------------------------------------------
inventory
--------------------------------------------------
invent.cc: prompt_invent_item
invent.cc: _invent_select


--------------------------------------------------
item definitions
--------------------------------------------------
externs.h: item_def
default constructor follows declaration
enum.h: item_status_flag_type  ISFLAG_CURSED


--------------------------------------------------
new scroll or potion
--------------------------------------------------

itemprop-enum.h : scroll_type SCR_IDENTIFY
rltiles/dc-item.txt : same order and count in scroll SCROLL

enum.h : potion_type POT_INVISIBILITY
potion.cc : potion_effects[] (must be same number and order as potion_type)
rltiles/dc-item.txt : same order as in enum.h POT_ID_FIRST


--------------------------------------------------
spell power calculation
--------------------------------------------------
process_command
spl-cast.cc: do_cast_spell
spl-cast.cc: cast_a_spell
spl-cast.cc: spell_no_hostile_in_range
spl-cast.cc: calc_spell_range
spl-cast.cc: calc_spell_power

*** seems to just handle figuring out what the beam hits
spl-cast.cc: your_spells        // calculates spell power through   calc_spell_power
spl-cast.cc: _do_cast           // handles each kind of spell
zapping                 // definitely involved with actual damage part

zappy or pbolt.fire ?
zappy does damage calculation

pbolt.fire()
beam.cc: do_fire


guts of damage calculation:
zappy        (for beam application of damage)
zap-data.h   (for specs on damage / hit per spell)

spell success:
spl-cast.cc: raw_spell_fail


spell list view
spl-cast.cc: list_spells_wide(true) 
spl-cast.cc: _spell_wide_description


potions
potion.cc: PotionMagic
potion.cc: PotionHealing


spell casting:
spl-cast.cc: cast_a_spell
spl-cast.cc: your_spells
spl-cast.cc: _do_cast


spell cost:
spl-util.cc: spell_mana

transforms:
spl-cast.cc: _do_cast
spl-selfench.cc: cast_transform
transform.cc: transform

--------------------------------------------------
summoning
--------------------------------------------------
mon-ench.cc: decay_enchantment 
mon-ench.cc: cost_of_maintaining_summon

spl-summoning.cc:               // all of the summon spell implementations

mon-spell.h: mspell_list        // list of monsters and which spells they can cast

--------------------------------------------------
long term spell effects (e.g. abjuration aura)
--------------------------------------------------
player-reacts.cc: decrement_durations (752 for abj)
spl-summoning.cc: _abjuration       // player abjuring


mon-cast.cc: mons_cast
mon-cast.cc: _monster_abjuration 
mon-cast.cc: _monster_abjure_target     // monster abjuring player summon

player-reacts.cc: _decrement_durations
player-reacts.cc: _decrement_a_duration



--------------------------------------------------
key command
--------------------------------------------------
main.cc: launch_game
main.cc: _input
main.cc: process_command

--- movement ---
main.cc: _move_player
player.cc: move_player_to_grid

mon-act.cc: handler_monsters 3667
mon-act.cc: handle_monster_move
mon-behv.cc: handle_behavior

monster.cc: monster::move_to_pos
monster.cc: monster::moveto

mon-act.cc: _do_move_monster
mon-act.cc: _swim_or_move_energy


in middle of _move_player is timing info, around 3520
you.time_taken

shortcuts: cmd-keys.h

definitions: command.cc

--------------------------------------------------
resting
--------------------------------------------------
main.cc: _do_rest


--------------------------------------------------
abilities
--------------------------------------------------
ability.cc: Ability_List[]
ability.cc: activate_talent
ability.cc: _do_ability

--------------------------------------------------
elemental resistance calculations:
--------------------------------------------------
ouch.cc: check_your_resists
fight.cc: resist_adjust_damage


--------------------------------------------------
mutation
--------------------------------------------------
mutation.cc: _delete_single_mutation_level

mutation.cc: delete_mutation

mutation.cc: perma_mutate



--------------------------------------------------
regen
--------------------------------------------------

player-reacts.cc: _regenerate_hp_and_mp

--------------------------------------------------
enchantment duration
--------------------------------------------------
mon-ench.cc: monster::add_ench
mon-ench.cc: mon_enchant::set_duration
mon-ench.cc: mon_enchant::calc_duration

--------------------------------------------------
monster generation
--------------------------------------------------
mgen_data.h

mon-place.cc: create_monster
mon-place.cc: mons_place
mon-place.cc: place_monster
mon-place.cc: _place_monster_aux
mon-util.cc: define_monster

mon-place.cc: _place_monster_aux
mon-ench.cc: mark_summoned

menv is a define for env.mons (defines.h)

mitm -> env.item
grd -> env.grid
mgrd -> env.mgrid
igrd -> env.igrid


--------------------------------------------------
stepdown utilities
--------------------------------------------------
stepdown.cc


--------------------------------------------------
LOS stuff
--------------------------------------------------
defines.h: LOS_RADIUS
autofight.lua: LOS_RADIUS


--------------------------------------------------
Beams
--------------------------------------------------
spell -> zap -> beam


--------------------------------------------------
Attacking message
--------------------------------------------------
melee_attack
print_wounds
simple_monster_message
announce_hit

--------------------------------------------------
Tile layout
--------------------------------------------------
tilesdl.cc: do_layout

--------------------------------------------------
Timed effects
--------------------------------------------------
evolution:
timed_effects.cc: _evolve

fixing wrong delete mutation:
b delete_mutation
b _delete_single_mutation_level
r


--------------------------------------------------
adding an option
--------------------------------------------------
options.h: add to the structure
initfile.cc: add to initialization of that structure
initfile.cc: read_option_line  add option there

--------------------------------------------------
game setup / starting
--------------------------------------------------

main.cc: main
main.cc: _launch_game_loop
main.cc: _launch_game : contains intro messages
startup.cc: startup_step  : defaults is initialized here

choosing game:
startup.cc: _show_startup_menu  where tab is checked

startup.cc: choose_game
newgame.cc: _choose_char
newgame.cc: _choose_difficulty

startup.cc: _post_init

starting game:
ng-setup.cc: setup_game
ng-setup.cc: _setup_generic

reset options:
initfile.cc: reset_options  776
newgame.cc: newgame_def::newgame_def  constructs defaults


--------------------------------------------------
game loading / saving
--------------------------------------------------
files.cc: _restore_game
files.cc: _restore_tagged_chunk
tags.cc: tag_read  // this one contains all of the major chunks read
tags.cc: tag_read_you

--------------------------------------------------
experience gain
--------------------------------------------------
player.cc: exp_needed

--------------------------------------------------
magic resistance
--------------------------------------------------
player.cc: player_res_magic

----------------------------------------------------------------------------------------------------
building web crawl
----------------------------------------------------------------------------------------------------

vi /etc/locale.gen  # uncomment the correct locale
locale-gen
source /etc/profile

USE=png emerge -vak pngcrush advancecomp
make -j2 prefix=/var/crawl GAME="crawl" USE_DGAMELAUNCH=y WEBTILES=y install

emerge -vak pip

cd /t
cd tornado
git clone https://github.com/tornadoweb/tornado.git
git checkout branch3.2
python setup.py install

## wrong version, won't work
# pip install tornado

rsync -a webserver/ /var/crawl/webserver/
rsync -a util/webtiles-init-player.sh /var/crawl/webserver/init-player.sh
cd /var/crawl
vi webserver/config.py

useradd crawl
mkdir rcs
chown crawl rcs
chown crawl webserver/passwd.db3
chown crawl webserver
chown crawl webserver/game_data

python webserver/server.py

